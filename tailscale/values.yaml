# Tailscale Operator Configuration
# Provides secure remote access to your k3s cluster

tailscale-operator:
  # OAuth configuration
  # REQUIRED: OAuth credentials must be provided via values-secrets.yaml (not committed)
  # or passed at runtime via --set oauth.clientId=xxx
  oauth:
    clientId: ""
    clientSecret: ""

  # Operator configuration
  operatorConfig:
    # Hostname for the operator pod
    hostname: "k3s-operator"

    # Explicitly disable tags - they require ACL configuration first
    defaultTags: []

    # Log level (info, debug, error)
    logging: "info"

  # API Server Proxy - Exposes Kubernetes API via Tailscale
  apiServerProxyConfig:
    mode: "true"
    hostname: "k3s-api"

  # Ingress Proxy - Exposes annotated ingresses via Tailscale
  ingressProxyConfig:
    mode: "true"

  # Resources
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi

  # RBAC
  rbac:
    create: true

  # Service Account
  serviceAccount:
    create: true
    name: tailscale-operator

# Optional: Subnet router configuration
# Exposes your entire k8s network via Tailscale
subnetRouter:
  enabled: true
  routes:
    - "10.0.1.0/24"  # Node network
    - "10.43.0.0/16"  # Service network
    - "10.42.0.0/16"  # Pod network

