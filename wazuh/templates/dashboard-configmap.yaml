apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "wazuh.fullname" . }}-dashboard-config
  namespace: {{ .Values.namespace }}
  labels:
    {{- include "wazuh.labels" . | nindent 4 }}
    app.kubernetes.io/component: dashboard
data:
  wazuh.yml: |
    hosts:
      - default:
          url: https://{{ include "wazuh.fullname" . }}-manager
          port: 55000
          username: {{ .Values.dashboard.config.username }}
          password: {{ .Values.dashboard.config.password }}
          run_as: false
          timeout: 15
          ssl:
            verify_certificate: false
            verify_hostnames: false
  opensearch_dashboards.yml: |
    server.host: 0.0.0.0
    server.port: 5601
    opensearch.hosts: https://{{ include "wazuh.fullname" . }}-indexer:9200
    opensearch.ssl.verificationMode: none
    opensearch.requestHeadersWhitelist: [ authorization,securitytenant ]
    opensearch_security.multitenancy.enabled: false
    opensearch_security.readonly_mode.roles: ["kibana_read_only"]
    opensearch.username: admin
    opensearch.password: admin
    server.ssl.enabled: true
    server.ssl.key: "/usr/share/wazuh-dashboard/config/certs/dashboard-key.pem"
    server.ssl.certificate: "/usr/share/wazuh-dashboard/config/certs/dashboard.pem"
    opensearch.ssl.certificateAuthorities: ["/usr/share/wazuh-dashboard/config/certs/root-ca.pem"]
    uiSettings.overrides.defaultRoute: /app/wazuh
